<html>
  <head>
    <title>quiz: Section 1 Question 4</title>
    <style>
      #answerBox {
        display: flex;
        align-content: center;
        justify-content: center;
        border: 3px dotted black;
        max-width: 300px;
        padding: .2em;
        margin-bottom: 20px;
      }

      #colorPicker {
        display: grid;
        max-width: 60%;
      }

      #colorPicker button {
        display: inline-block;
        max-width: 150px;
        cursor: pointer;
      }
    </style>
    <script type="text/javascript">
      document.addEventListener("DOMContentLoaded", (event) => {
          console.log('DOM is ready.')
          const getRandomRGB = () => {
            const r = Math.floor(Math.random() * Math.floor(255));
            const g = Math.floor(Math.random() * Math.floor(255));
            const b = Math.floor(Math.random() * Math.floor(255));
            return `rgb(${r},${g},${b})`;
          };

          const colorPicker = document.getElementById('colorPicker');

          function componentToHex(c) {
            var hex = c.toString(16);
            return hex.length == 1 ? "0" + hex : hex;
          }

          function rgbToHex(r,g,b) {
            return '#'+componentToHex(Number(r))+componentToHex(Number(g))+componentToHex(Number(b))
          }

          for (let i=0; i<10000; ++i) {
            const btn = document.createElement('button');
            const rgb = getRandomRGB();
            btn.id = rgb;
            btn.textContent = rgb;
            btn.style.backgroundColor = rgb;
            btn.addEventListener('click', (e) => {
              console.log('e', e.target.innerHTML )
              const regex = /([0-9])\w+/g;
              const found = e.target.innerHTML.match(regex);
              
              console.log('found', found, rgbToHex(found[0], found[1], found[2]))
              const answerdiv = document.getElementById("answerBox")
              answerdiv.innerHTML = rgbToHex(found[0], found[1], found[2])
              console.log('answerdiv', answerdiv)
            })
            colorPicker.appendChild(btn);
          }
      });
    </script>
  </head>
  <body>
    <h3>Write code to show RGB code that users clicked inside the answer box.</h3>
    <div id="answerBox">ANSWER</div>
    <div id="colorPicker"></div>
  </body>
</html>